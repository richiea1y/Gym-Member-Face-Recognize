<!DOCTYPE html>
<html>

<head>
    <title>會員登入</title>

    <link rel="stylesheet" href="all.css" />
    <link rel="icon" href="/views/favicon.jpg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
        crossorigin="anonymous"></script>
</head>

<body>
    <header class="header">
        <nav class="navbar">
            <div class="home-frame">
                <a class="nav-title" href="/views/index.html"><img src="/views/sport.jpg" alt="#" title="首頁圖" width="30"
                        class="home-img" />Powerful fitness</a>
                <div class="home-ul">
                    <ul class="home-ul mr-auto">
                        <li><a href="#" class="site-nav__ite">關於我們</a></li>
                        <li><a href="#" class="site-nav__ite">最新消息</a></li>
                        <li><a href="#" class="site-nav__ite">會員中心</a></li>
                        <li><a href="#" class="site-nav__ite">健身課程</a></li>
                        <li><a href="./about.html" class="site-nav__ite">健身諮詢</a></li>
                </div>
                </ul>
            </div>
        </nav>
        <div class="login_bg">
            <main class="login_main">
                <div class="login_center">
                    <h2 class="login_h">會員中心</h2>
                </div>
                <ul class="nav justify-content-center ">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">會員登入</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">會員註冊</a>
                    </li>
                </ul>
                <hr>
                <div class="login_form">
                    <form id="loginForm">
                        <label for="gymAccount">帳號：</label>
                        <br>
                        <input type="text" id="gymAccount" name="gym_account" required />
                        <br />
                        <label for="gymPassword">密碼：</label>
                        <br>
                        <input type="password" id="gymPassword" name="gym_password" required />
                        <br />
                        <button type="submit">登入</button>
                    </form>
                    <div id="memberInfo"></div>
                </div>
            </main>
        </div>
        <footer class="footer">
            <div class="footmas">
                <p>106台北市大安區復興南路一段390號2樓<br>02-6631-6588</p>
            </div>
            <div class="footmas">
                <p><br><br></p>
            </div>
            <div class="footmas">
                <p><br><br>© 2024 AIML05. All rights reserved.</p>
            </div>
        </footer>
        <script>
            // 處理表單提交事件
            document
                .getElementById("loginForm")
                .addEventListener("submit", function (event) {
                    event.preventDefault(); // 防止表單默認提交行為

                    const gymAccount = document.getElementById("gymAccount").value;
                    const gymPassword = document.getElementById("gymPassword").value;

                    fetch(
                        `http://localhost:3000/get_member?account=${encodeURIComponent(
                            gymAccount
                        )}&password=${encodeURIComponent(gymPassword)}`
                    )
                        .then((response) => response.json())
                        .then((data) => {
                            if (data.error) {
                                alert("Error: " + data.error);
                            } else {
                                displayMemberInfo(data);
                            }
                        })
                        .catch((error) => console.error("Error:", error));
                });

            // 顯示會員資料
            function displayMemberInfo(member) {
                const memberInfoDiv = document.getElementById("memberInfo");
                memberInfoDiv.innerHTML = `
                <h3>會員資料</h3>
                <p>帳號: ${member.gym_account}</p>
                <p>姓名: ${member.member_name}</p>
                <p>性別: ${member.member_gender}</p>
                <p>電話: ${member.member_phone}</p>
                <p>年紀: ${member.member_age}</p>
                <p>居住城市: ${member.member_city}</p>
                <p>圖片: <img src="${member.member_image
                    }" alt="Member Image" width="100"></p>
                <p>編碼: ${JSON.stringify(member.encoding)}</p>
            `;
            }
        </script>
</body>

</html>